name: Auto Create PRs
on:
    pull_request:
      branches:
        - main

# permissions:
#     contents: read
#     deployments: write

jobs:
  auto-create-prs:
    name: Auto Create PRs
    timeout-minutes: 30
    runs-on: ubuntu-latest

    steps:
        - name: Checkout repository
          uses: actions/checkout@v2

        - name: Create PR to UK-MAIN
          run: gh pr create -B uk-main -H ${{ github.head_ref }} --title 'Merge ${{ github.head_ref }} into uk-main' --body 'Created by Github action'
          env:
              GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          
        # - name: Create PR to UK-MAIN
        #   uses: devops-infra/action-pull-request@v0.5.5
        #   with:
        #     github_token: ${{ secrets.GITHUB_TOKEN }}
        #     source_branch: ${{ github.head_ref }}
        #     target_branch: uk-main
        #     title: Automatic pull request from ${{ github.head_ref }}
        #     body: "**Automated pull request**"
        #     assignee: octocat
        #     # old_string: "<!-- Add your description here -->"
        #     # new_string: "** Automatic pull request**"
        #     get_diff: true
        #     ignore_users: "dependabot"
        #     allow_no_diff: false